<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kalkulačka portfolia</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
/* KONTEJNER */
body {
	background: transparent;
	position: relative;
}
#container {
	display: flex;
	gap: 100px;
	font-family: Arial, sans-serif;
	color:
	margin: 0px;
	margin-top: 100px;
	align-items: flex-start;
}

/* LEVÝ PANEL */
#controls {
	width: 650px;
	height: 500px;
	display: flex;
	flex-direction: column;
	justify-content: flex-start;
	align: right;
	margin-top: 100px;
	gap: 70px; /* mezi radky */
}

.pillar {
	display: flex;
	align-items: flex-end;
}

.pillar h2 {
	width: 390px;
	font-size: 59px;
	margin: 0;
}

.stable {
	color: rgb(255, 185, 117);
}

.fair {
	color: rgb(206, 206, 226);
}

.growth {
	color: rgb(109, 180, 221);
}

.value-controls {
	display: flex;
	align-items: center;
	font-size: 57px;
	gap: 10px;
}

.value-controls button {
	width: 70px;
	padding: 5px 0; 
	font-size: 57px;
	border: 5px;
	border-radius: 10px;
	background-color: #ff751f;
	color: #fff;
	cursor: pointer;
	font-weight: bold;
	transition: background 0.2s;
}

.value-controls button:hover {
	background-color: #e3640c;
}

.value-box {
	font-weight: bold;
	font-size: 59px;
	padding: 5px;
	color: #a8a8a8;
}

#chartArea {
	display: flex;
	flex: 1 0 100;  /* */
	height: 500px;
	width: 700px;
	margin-top: 0px;
	/* horizontálně vycentrován */
	align-items: flex-start; /* zarovnání shora s levým panelem */
}
</style>
</head>
<body>
<div id="container">
	<!-- Levý panel -->
	<div id="controls">
		<div class="pillar">
			<h2 class="stable">Stabilita</h2>
			<div class="value-controls">
				<button onclick="updateValue('stabilita', -5)">-5</button>
				<div class="value-box" id="stabilitaBox"></div>
				<button onclick="updateValue('stabilita', 5)">+5</button>
			</div>
		</div>

		<div class="pillar">
			<h2 class="fair">Fér cena</h2>
			<div class="value-controls">
				<button onclick="updateValue('fer', -5)">-5</button>
				<div class="value-box" id="ferBox"></div>
				<button onclick="updateValue('fer', 5)">+5</button>
			</div>
		</div>

		<div class="pillar">
			<h2 class="growth">Růstovky</h2>
			<div class="value-controls">
				<div style="width:40px"></div>
				<div class="value-box" id="rustovkyBox"></div>
				<div style="width:40px"></div>
			</div>
		</div>
	</div>

	<!-- Pravý panel -->
	<div id="chartArea">
		<canvas id="portfolioChart"></canvas>
	</div>
</div>

<script>
// Inicialní hodnoty
let stabilita = 50;
let fer = 30;
let rustovky = 100 - (stabilita + fer);
let portfolioChart;

// Funkce pro update hodnot
function updateValue(pillar, delta) {
	if (pillar === "stabilita") stabilita = clamp(stabilita + delta, 40, 60);
	if (pillar === "fer") fer = clamp(fer + delta, 25, 35);
	rustovky = 100 - (stabilita + fer);
	updateUI();
	portfolioChart.data.datasets[0].data = [stabilita, fer, rustovky];
	portfolioChart.update();

	syncChartHeight();
}

// Nastavení min max pilíře
function clamp(value, min, max) {
	return Math.min(Math.max(value, min), max);
}

// Update hodnot v HTML
function updateUI() {
	document.getElementById("stabilitaBox").textContent = stabilita + "%";
	document.getElementById("ferBox").textContent = fer + "%";
	document.getElementById("rustovkyBox").textContent = rustovky + "%";
}

function syncChartHeight() {
	const left = document.getElementById("controls");
	const right = document.getElementById("chartArea");
	right.style.height = left.offsetHeight + "px";
}

// Inicializace po načtení DOM
window.addEventListener("DOMContentLoaded", () => {
	updateUI();
	syncChartHeight();

	const ctx = document.getElementById("portfolioChart").getContext("2d");
	ctx.canvas.style.backgroundColor = "transparent";
	portfolioChart = new Chart(ctx, {
		type: "pie",
		data: {
			labels: ["Stabilita", "Fér cena", "Růstovky"],
			datasets: [
				{
					data: [stabilita, fer, rustovky],
					backgroundColor: [
						"rgba(255, 185, 117, 0.9)",
						"rgba(206, 206, 226, 0.9)",
						"rgba(109, 180, 221, 0.9)"
					],
					borderColor: [
						"rgb(178, 130, 82)",
						"rgb(144, 144, 158)",
						"rgb(76, 126, 155)"
					],
					borderWidth: 2
				}
			]
		},
		options: {
			responsive: true,
			maintainAspectRatio: false,
			plugins: {
				legend: {
					position: "right",
					align: "start",
					labels: {
						boxWidth: 22,
						padding: 8,
						font: { size: 24 },
						color: "#ffffff#"
					}
				}
			}
		}
	});

	window.addEventListener("resize", syncChartHeight);
});
</script>
</body>
</html>
